// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: service_history.sql

package dbpg

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const createServiceNote = `-- name: CreateServiceNote :one
INSERT INTO service_notes (service_record_id, note_type, content, is_visible_to_customer, created_by)
VALUES ($1, $2, $3, $4, $5)
RETURNING id, service_record_id, note_type, content, is_visible_to_customer, created_by, created_at
`

type CreateServiceNoteParams struct {
	ServiceRecordID     int64
	NoteType            string
	Content             string
	IsVisibleToCustomer bool
	CreatedBy           pgtype.Int8
}

func (q *Queries) CreateServiceNote(ctx context.Context, arg CreateServiceNoteParams) (ServiceNote, error) {
	row := q.db.QueryRow(ctx, createServiceNote,
		arg.ServiceRecordID,
		arg.NoteType,
		arg.Content,
		arg.IsVisibleToCustomer,
		arg.CreatedBy,
	)
	var i ServiceNote
	err := row.Scan(
		&i.ID,
		&i.ServiceRecordID,
		&i.NoteType,
		&i.Content,
		&i.IsVisibleToCustomer,
		&i.CreatedBy,
		&i.CreatedAt,
	)
	return i, err
}

const createServicePhoto = `-- name: CreateServicePhoto :one
INSERT INTO service_photos (service_record_id, photo_type, url, caption)
VALUES ($1, $2, $3, $4)
RETURNING id, service_record_id, photo_type, url, caption, created_at
`

type CreateServicePhotoParams struct {
	ServiceRecordID int64
	PhotoType       string
	Url             string
	Caption         pgtype.Text
}

func (q *Queries) CreateServicePhoto(ctx context.Context, arg CreateServicePhotoParams) (ServicePhoto, error) {
	row := q.db.QueryRow(ctx, createServicePhoto,
		arg.ServiceRecordID,
		arg.PhotoType,
		arg.Url,
		arg.Caption,
	)
	var i ServicePhoto
	err := row.Scan(
		&i.ID,
		&i.ServiceRecordID,
		&i.PhotoType,
		&i.Url,
		&i.Caption,
		&i.CreatedAt,
	)
	return i, err
}

const createServiceProductUsed = `-- name: CreateServiceProductUsed :one
INSERT INTO service_products_used (service_record_id, product_name, notes)
VALUES ($1, $2, $3)
RETURNING id, service_record_id, product_name, notes
`

type CreateServiceProductUsedParams struct {
	ServiceRecordID int64
	ProductName     string
	Notes           pgtype.Text
}

func (q *Queries) CreateServiceProductUsed(ctx context.Context, arg CreateServiceProductUsedParams) (ServiceProductsUsed, error) {
	row := q.db.QueryRow(ctx, createServiceProductUsed, arg.ServiceRecordID, arg.ProductName, arg.Notes)
	var i ServiceProductsUsed
	err := row.Scan(
		&i.ID,
		&i.ServiceRecordID,
		&i.ProductName,
		&i.Notes,
	)
	return i, err
}

const createServiceRecord = `-- name: CreateServiceRecord :one
INSERT INTO service_records (booking_id, customer_id, vehicle_id, completed_date)
VALUES ($1, $2, $3, $4)
RETURNING id, booking_id, customer_id, vehicle_id, completed_date, created_at, updated_at
`

type CreateServiceRecordParams struct {
	BookingID     int64
	CustomerID    int64
	VehicleID     pgtype.Int8
	CompletedDate pgtype.Timestamptz
}

func (q *Queries) CreateServiceRecord(ctx context.Context, arg CreateServiceRecordParams) (ServiceRecord, error) {
	row := q.db.QueryRow(ctx, createServiceRecord,
		arg.BookingID,
		arg.CustomerID,
		arg.VehicleID,
		arg.CompletedDate,
	)
	var i ServiceRecord
	err := row.Scan(
		&i.ID,
		&i.BookingID,
		&i.CustomerID,
		&i.VehicleID,
		&i.CompletedDate,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getServiceRecordByID = `-- name: GetServiceRecordByID :one
SELECT id, booking_id, customer_id, vehicle_id, completed_date, created_at, updated_at FROM service_records
WHERE id = $1
`

type GetServiceRecordByIDParams struct {
	ID int64
}

func (q *Queries) GetServiceRecordByID(ctx context.Context, arg GetServiceRecordByIDParams) (ServiceRecord, error) {
	row := q.db.QueryRow(ctx, getServiceRecordByID, arg.ID)
	var i ServiceRecord
	err := row.Scan(
		&i.ID,
		&i.BookingID,
		&i.CustomerID,
		&i.VehicleID,
		&i.CompletedDate,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const listServiceNotes = `-- name: ListServiceNotes :many
SELECT id, service_record_id, note_type, content, is_visible_to_customer, created_by, created_at FROM service_notes
WHERE service_record_id = $1
ORDER BY created_at
`

type ListServiceNotesParams struct {
	ServiceRecordID int64
}

func (q *Queries) ListServiceNotes(ctx context.Context, arg ListServiceNotesParams) ([]ServiceNote, error) {
	rows, err := q.db.Query(ctx, listServiceNotes, arg.ServiceRecordID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ServiceNote
	for rows.Next() {
		var i ServiceNote
		if err := rows.Scan(
			&i.ID,
			&i.ServiceRecordID,
			&i.NoteType,
			&i.Content,
			&i.IsVisibleToCustomer,
			&i.CreatedBy,
			&i.CreatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listServicePhotos = `-- name: ListServicePhotos :many
SELECT id, service_record_id, photo_type, url, caption, created_at FROM service_photos
WHERE service_record_id = $1
ORDER BY created_at
`

type ListServicePhotosParams struct {
	ServiceRecordID int64
}

func (q *Queries) ListServicePhotos(ctx context.Context, arg ListServicePhotosParams) ([]ServicePhoto, error) {
	rows, err := q.db.Query(ctx, listServicePhotos, arg.ServiceRecordID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ServicePhoto
	for rows.Next() {
		var i ServicePhoto
		if err := rows.Scan(
			&i.ID,
			&i.ServiceRecordID,
			&i.PhotoType,
			&i.Url,
			&i.Caption,
			&i.CreatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listServiceProductsUsed = `-- name: ListServiceProductsUsed :many
SELECT id, service_record_id, product_name, notes FROM service_products_used
WHERE service_record_id = $1
`

type ListServiceProductsUsedParams struct {
	ServiceRecordID int64
}

func (q *Queries) ListServiceProductsUsed(ctx context.Context, arg ListServiceProductsUsedParams) ([]ServiceProductsUsed, error) {
	rows, err := q.db.Query(ctx, listServiceProductsUsed, arg.ServiceRecordID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ServiceProductsUsed
	for rows.Next() {
		var i ServiceProductsUsed
		if err := rows.Scan(
			&i.ID,
			&i.ServiceRecordID,
			&i.ProductName,
			&i.Notes,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listServiceRecordsByBooking = `-- name: ListServiceRecordsByBooking :many
SELECT id, booking_id, customer_id, vehicle_id, completed_date, created_at, updated_at FROM service_records
WHERE booking_id = $1
ORDER BY completed_date DESC
`

type ListServiceRecordsByBookingParams struct {
	BookingID int64
}

func (q *Queries) ListServiceRecordsByBooking(ctx context.Context, arg ListServiceRecordsByBookingParams) ([]ServiceRecord, error) {
	rows, err := q.db.Query(ctx, listServiceRecordsByBooking, arg.BookingID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ServiceRecord
	for rows.Next() {
		var i ServiceRecord
		if err := rows.Scan(
			&i.ID,
			&i.BookingID,
			&i.CustomerID,
			&i.VehicleID,
			&i.CompletedDate,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listServiceRecordsByCustomer = `-- name: ListServiceRecordsByCustomer :many
SELECT id, booking_id, customer_id, vehicle_id, completed_date, created_at, updated_at FROM service_records
WHERE customer_id = $1
ORDER BY completed_date DESC
`

type ListServiceRecordsByCustomerParams struct {
	CustomerID int64
}

func (q *Queries) ListServiceRecordsByCustomer(ctx context.Context, arg ListServiceRecordsByCustomerParams) ([]ServiceRecord, error) {
	rows, err := q.db.Query(ctx, listServiceRecordsByCustomer, arg.CustomerID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ServiceRecord
	for rows.Next() {
		var i ServiceRecord
		if err := rows.Scan(
			&i.ID,
			&i.BookingID,
			&i.CustomerID,
			&i.VehicleID,
			&i.CompletedDate,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
